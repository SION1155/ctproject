<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê°„ì§€(å¹²æ”¯)ë¡œ ì—°ë„ í‘œí˜„í•˜ê¸°</title>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    h1 { background: #0073cf; color: white; padding: 10px; }
    h2 { margin: 18px 0 10px 0; font-size: 1.1em; color: #444; }
    .section { margin-top: 20px; }
    table { border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #aaa; padding: 6px 14px; text-align: center; }
    #result { margin-top: 18px; font-size: 1.1em; font-weight: bold; }
    #questionBox { border: 2px solid #0073cf; background: #f0f8ff; padding: 22px; margin-top: 25px; }
    #timer { font-weight: bold; color: red; margin-left: 10px; }
    #popup { display:none; background:#fff; border:2px solid black; padding:20px; position:fixed; top:30%; left:50%; transform:translateX(-50%); width:300px; z-index:20; text-align:center; }
    #popup button { margin-top: 16px; }
    .ctrls { margin:20px 0 18px 0; }
    input[type="text"] { width: 80px; padding: 6px; margin-right: 10px; }
    button { padding: 8px 18px; }
    .caption { font-weight:bold; margin-bottom:6px; }
  </style>
</head>
<body>
  <h1>íƒ€ì´í‹€: ê°„ì§€(å¹²æ”¯)ë¡œ ì—°ë„ í‘œí˜„í•˜ê¸°</h1>
  <h2>ëŒ€ìƒ ë° êµê³¼: ê³ 2 (í•œë¬¸)</h2>

  <div class="section">
    <b>ì§€ë¬¸:</b>
    <div>
      ì¹´í”¼ë°”ë¼ëŠ” ë‹¬ë ¥ì„ ë³´ë‹¤ê°€ ë¬¸ë“ ê¶ê¸ˆí•´ì¡ŒìŠµë‹ˆë‹¤.<br>
      â€œìš°ë¦¬ë‚˜ë¼ëŠ” ì˜›ë‚ ë¶€í„° í•´ë§ˆë‹¤ ì´ë¦„ì´ ë‹¬ë¼ì§„ë‹¤ë˜ë°, 2024ë…„ì€ â€˜ê°‘ì§„ë…„â€™ì´ë˜.<br>
      ê·¸ëŸ°ë° ëª‡ ë…„ ë’¤ì—ëŠ” ë¬´ìŠ¨ ê°„ì§€ê°€ ë¶™ì„ê¹Œ?â€
    </div>
    <div style="margin-top:18px;">
      <div class="caption">ì˜ˆì‹œ ì—°ë„-ê°„ì§€ í‘œ</div>
      <table>
        <tr>
          <th>2020</th>
          <th>2021</th>
          <th>2022</th>
          <th>2023</th>
          <th>2024</th>
          <th>2025</th>
          <th>2026</th>
          <th>2027</th>
          <th>2028</th>
          <th>2029</th>
          <th>2030</th>
        </tr>
        <tr>
          <td>ê²½ì</td>
          <td>ì‹ ì¶•</td>
          <td>ì„ì¸</td>
          <td>ê³„ë¬˜</td>
          <td>ê°‘ì§„</td>
          <td>ì„ì‚¬</td>
          <td>ë³‘ì˜¤</td>
          <td>ì •ë¯¸</td>
          <td>ë¬´ì‹ </td>
          <td>ê¸°ìœ </td>
          <td>ê²½ìˆ </td>
        </tr>
      </table>
    </div>
  </div>

  <div class="ctrls">
    <label>ì œí•œ ì‹œê°„:</label>
    <select id="timeLimit">
      <option value="30">30ì´ˆ</option>
      <option value="60">1ë¶„</option>
      <option value="90">1ë¶„ 30ì´ˆ</option>
      <option value="120">2ë¶„</option>
    </select>
    <button onclick="startQuiz()" style="margin-left:10px;">ë¬¸ì œ í’€ê¸°</button>
  </div>

  <div id="questionBox" class="section" style="display:none;">
    <p id="questionText"></p>
    <div style="margin-top:12px;">
      <label>ì •ë‹µ ì…ë ¥: <input type="text" id="userAnswer" maxlength="2" placeholder="ì˜ˆ: ê²½ì"></label>
      <button onclick="checkAnswer()">ì •ë‹µ ì œì¶œ</button>
      <span id="timer"></span>
      <span id="result"></span>
    </div>
  </div>

  <div id="popup">
    <p>â° ì‹œê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</p>
    <button onclick="restart()">ë‹¤ì‹œ ë„ì „</button>
  </div>

  <script>
    const ì²œê°„ = ["ê°‘", "ì„", "ë³‘", "ì •", "ë¬´", "ê¸°", "ê²½", "ì‹ ", "ì„", "ê³„"];
    const ì§€ì§€ = ["ì", "ì¶•", "ì¸", "ë¬˜", "ì§„", "ì‚¬", "ì˜¤", "ë¯¸", "ì‹ ", "ìœ ", "ìˆ ", "í•´"];
    const ì˜ˆì‹œì—°ë„ = [2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030];
    let timerInterval, answerYear, correctAnswer;

    function getGapja(year) {
      const baseYear = 1984;
      const index = (year - baseYear) % 60;
      const pos = (index + 60) % 60;
      const ì²œê°„Index = pos % 10;
      const ì§€ì§€Index = pos % 12;
      return ì²œê°„[ì²œê°„Index] + ì§€ì§€[ì§€ì§€Index];
    }

    function startQuiz() {
      document.getElementById('result').innerText = '';
      document.getElementById('userAnswer').value = '';
      document.getElementById('popup').style.display = 'none';
      document.getElementById('questionBox').style.display = 'block';

      // ì˜ˆì‹œ ì—°ë„(2020~2030)ëŠ” ì œì™¸í•˜ê³  ëœë¤ ì—°ë„(2031~2099) ì¶œì œ
      let candidateYears = [];
      for(let y=2020; y<=2099; y++) {
        if(!ì˜ˆì‹œì—°ë„.includes(y)) candidateYears.push(y);
      }
      answerYear = candidateYears[Math.floor(Math.random() * candidateYears.length)];
      correctAnswer = getGapja(answerYear);

      document.getElementById('questionText').innerHTML =
        `<b>ë¬¸ì œ:</b> <b>${answerYear}ë…„</b>ì˜ ê°„ì§€ëŠ” ë¬´ì—‡ì¸ê°€ìš”? <span id="timer"></span>`;

      // íƒ€ì´ë¨¸
      const timeLimit = parseInt(document.getElementById('timeLimit').value);
      let timeLeft = timeLimit;
      document.getElementById('timer').innerText = ` (ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ)`;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = ` (ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ)`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          document.getElementById('popup').style.display = 'block';
          document.getElementById('timer').innerText = '';
        }
      }, 1000);
    }

    function checkAnswer() {
      clearInterval(timerInterval);
      let userAns = document.getElementById('userAnswer').value.trim();
      let result = document.getElementById('result');
      if (!userAns) {
        result.innerHTML = "ì •ë‹µì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        result.style.color = "#b00";
        return;
      }
      if (userAns === correctAnswer) {
        result.innerHTML = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
        result.style.color = "#0073cf";
      } else {
        result.innerHTML = `ì˜¤ë‹µì…ë‹ˆë‹¤. <b>ì •ë‹µì€ ${correctAnswer}</b>ì…ë‹ˆë‹¤.`;
        result.style.color = "#b00";
      }
    }

    function restart() {
      document.getElementById('popup').style.display = 'none';
      startQuiz();
    }
  </script>
</body>
</html>
